# Description:
#   A way to remote control TV, speaker, air conditioner etc.
#
# Dependencies:
#   None
#
# Configuration:
#   None
#
# Commands:
#   hubot turn on <target> - Turn on <target>.
#   hubot link off <target> - Turn off <target>.
#
# Author:
#   spesnova

endpoint = "http://10.0.1.10/messages"
#endpoint = process.env.HUBOT_IRKIT_ENDPOINT
data = JSON.stringify({"format":"raw","freq":38,"data":[8755,8755,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,1073,1073,10762,8755,8755,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,1073,1073]})

module.exports = (robot) ->
  robot.respond /turn\s*on\s*(.*)/i, (msg) ->
    robot.logger.debug msg.match[1]

    robot.http(endpoint)
      .post(data) (err, res, body) ->
        robot.logger.debug res
        robot.logger.debug body
        if err
          msg.send "Encountered an error :("
          robot.logger.debug err
          return
        msg.send "The TV turns on"

      #robot.respond /turn\s*off\s*(.*)/i, (msg) ->

